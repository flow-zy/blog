import{u as M,g as te,h as ie,i as U,j as re,P as ae,t as se,k as le,l as D,m as k,n as me,p as z,q as i,s as oe,R as P,v as ue,x as ce,y as ne,C as pe,z as he,A as de,B as ve,D as ge,E as ye,F as fe,G as je,H as $,I,J as be,K as q,L as we}from"./app-BfzwvKLN.js";const xe=["/","/intro.html","/css/","/html/","/jquery/","/jquery/ajax.html","/jquery/animation.html","/jquery/event.html","/jquery/extend.html","/jquery/intro.html","/jquery/modify-dom.html","/jquery/operate-dom.html","/jquery/selector.html","/js/","/js/error.html","/mini-app/","/mini-app/qr-code.html","/node/","/typescript/","/css/guide/","/css/guide/box.html","/css/guide/cascade.html","/css/guide/common.html","/css/guide/declaration.html","/css/guide/import.html","/css/guide/selector.html","/css/intro/","/css/intro/background-and-border.html","/css/intro/box.html","/css/intro/font.html","/css/intro/media.html","/css/intro/overflow.html","/css/intro/replaced.html","/css/intro/selector.html","/css/intro/sizing.html","/css/intro/text-direction.html","/css/intro/value.html","/css/layout/","/css/layout/exercise.html","/css/layout/flex.html","/css/layout/float.html","/css/layout/flow.html","/css/layout/grid.html","/css/layout/intro.html","/frame/react/","/frame/vue/","/html/guide/","/html/guide/tag.html","/html/intro/","/html/intro/basic.html","/html/intro/embed.html","/html/intro/form.html","/html/intro/format.html","/html/intro/head.html","/html/intro/image.html","/html/intro/layout.html","/html/intro/link.html","/html/intro/media.html","/html/intro/svg.html","/html/intro/table.html","/js/BOM/","/js/DOM/","/js/es/","/js/es/array.html","/js/es/async.html","/js/es/bigint.html","/js/es/class.html","/js/es/destructiurng.html","/js/es/function.html","/js/es/generator.html","/js/es/intro.html","/js/es/iterator.html","/js/es/module.html","/js/es/number.html","/js/es/object.html","/js/es/operator.html","/js/es/promise.html","/js/es/proxy-reflect.html","/js/es/regexp.html","/js/es/set-map.html","/js/es/string.html","/js/es/symbol.html","/js/es/variable.html","/js/function/","/js/function/call.html","/js/function/closure.html","/js/function/declare.html","/js/function/higher-order-function.html","/js/function/intro.html","/js/function/map-and-reduce.html","/js/function/scope.html","/js/function/this.html","/js/guide/","/js/guide/array.html","/js/guide/boolean.html","/js/guide/condition.html","/js/guide/data-structure.html","/js/guide/exercise.html","/js/guide/function.html","/js/guide/grammar.html","/js/guide/loop.html","/js/guide/object.html","/js/guide/string.html","/js/guide/variable.html","/js/object/JSON.html","/js/object/","/js/object/create.html","/js/object/date.html","/js/object/extend.html","/js/object/intro.html","/js/object/regExp.html","/js/object/wrap.html","/js/operators/","/js/operators/arithmetic.html","/js/operators/bit.html","/js/operators/boolean.html","/js/operators/comparison.html","/js/operators/priority.html","/js/types/","/js/types/array.html","/js/types/boolean.html","/js/types/function.html","/js/types/general.html","/js/types/null-undefined.html","/js/types/number.html","/js/types/object.html","/js/types/string.html","/mini-app/framework/","/mini-app/framework/demo.html","/mini-app/framework/page.html","/mini-app/framework/simple-debug.html","/mini-app/framework/tag-list.html","/mini-app/guide/","/mini-app/guide/env.html","/mini-app/guide/file-structure.html","/mini-app/tools/","/mini-app/tools/audit.html","/mini-app/tools/debug.html","/mini-app/tools/interface.html","/mini-app/tools/npm.html","/mini-app/tools/score.html","/typescript/advanced/","/typescript/advanced/class-and-interfaces.html","/typescript/advanced/class.html","/typescript/advanced/declaration-merging.html","/typescript/advanced/enum.html","/typescript/advanced/further-reading.html","/typescript/advanced/generics.html","/typescript/advanced/string-literal-types.html","/typescript/advanced/tuple.html","/typescript/advanced/type-aliases.html","/typescript/basics/","/typescript/basics/any.html","/typescript/basics/built-in-objects.html","/typescript/basics/declaration-files.html","/typescript/basics/primitive-data-types.html","/typescript/basics/type-assertion.html","/typescript/basics/type-inference.html","/typescript/basics/type-of-array.html","/typescript/basics/type-of-function.html","/typescript/basics/type-of-object-interfaces.html","/typescript/basics/union-types.html","/typescript/engineering/","/typescript/engineering/lint.html","/typescript/intro/","/typescript/intro/get-typescript.html","/typescript/intro/hello-typescript.html","/typescript/intro/what-is-typescript.html","/frame/react/core/basic.html","/frame/react/core/started.html","/frame/react/router/router.html","/frame/vue/core/app.html","/frame/vue/core/classAndStyle.html","/frame/vue/core/component.html","/frame/vue/core/composables.html","/frame/vue/core/computed.html","/frame/vue/core/conditional.html","/frame/vue/core/directives.html","/frame/vue/core/event.html","/frame/vue/core/form.html","/frame/vue/core/install.html","/frame/vue/core/lifecycle.html","/frame/vue/core/list.html","/frame/vue/core/reactivity.html","/frame/vue/core/sfc.html","/frame/vue/core/slot.html","/frame/vue/core/started.html","/frame/vue/core/template.html","/frame/vue/core/watch.html","/frame/vue/pinia/","/frame/vue/pinia/pinia.html","/frame/vue/resource/","/frame/vue/router/","/frame/vue/vuex/","/frame/vue/vuex/vuex.html","/mini-app/guide/ability/","/mini-app/guide/ability/debug.html","/mini-app/guide/ability/file-system.html","/mini-app/guide/ability/network.html","/mini-app/guide/ability/storage.html","/mini-app/guide/config/","/mini-app/guide/config/app-config.html","/mini-app/guide/config/page-config.html","/mini-app/guide/config/sitemap-config.html","/mini-app/guide/custom-component/","/mini-app/guide/custom-component/behavior.html","/mini-app/guide/custom-component/component.html","/mini-app/guide/custom-component/intro.html","/mini-app/guide/custom-component/style.html","/mini-app/guide/frame/","/mini-app/guide/frame/env.html","/mini-app/guide/frame/intro.html","/mini-app/guide/frame/js-support.html","/mini-app/guide/frame/mechanism.html","/mini-app/guide/frame/scene.html","/mini-app/guide/frame/update.html","/mini-app/guide/service/","/mini-app/guide/service/app.html","/mini-app/guide/service/lifetime.html","/mini-app/guide/service/module.html","/mini-app/guide/service/page.html","/mini-app/guide/service/register.html","/mini-app/guide/service/route.html","/mini-app/guide/service/run.html","/mini-app/guide/view/","/mini-app/guide/view/animation.html","/mini-app/guide/view/component.html","/mini-app/guide/view/condition-render.html","/mini-app/guide/view/data-bind.html","/mini-app/guide/view/event.html","/mini-app/guide/view/list-render.html","/mini-app/guide/view/model.html","/mini-app/guide/view/rendering-cache.html","/mini-app/guide/view/resizable.html","/mini-app/guide/view/selector.html","/mini-app/guide/view/template.html","/mini-app/guide/view/wxml.html","/mini-app/guide/view/wxs-event.html","/mini-app/guide/view/wxs.html","/mini-app/guide/view/wxss.html","/frame/react/reduxToolkit/core/started.html","/frame/react/resource/core/started.html","/frame/react/router/core/started.html","/frame/vue/pinia/core/started.html","/frame/vue/resource/core/started.html","/frame/vue/router/core/router.html","/frame/vue/router/core/started.html","/frame/vue/vuex/core/started.html","/mini-app/guide/service/api/","/mini-app/guide/service/api/interact.html","/mini-app/guide/service/api/network.html","/mini-app/guide/service/api/route.html","/mini-app/guide/service/api/storage.html","/mini-app/guide/service/api/system.html","/404.html","/frame/","/frame/react/core/","/frame/react/router/","/frame/vue/core/","/frame/react/reduxToolkit/core/","/frame/react/reduxToolkit/","/frame/react/resource/core/","/frame/react/resource/","/frame/react/router/core/","/frame/vue/pinia/core/","/frame/vue/resource/core/","/frame/vue/router/core/","/frame/vue/vuex/core/","/category/","/category/css/","/category/html/","/category/jquery/","/category/javascript/","/category/%E5%B0%8F%E7%A8%8B%E5%BA%8F/","/category/typescript/","/category/%E6%A1%86%E6%9E%B6/","/category/web/","/category/react/","/category/react-router/","/category/vue/","/category/%E5%89%8D%E7%AB%AF/","/category/%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%E5%BA%93/","/category/%E8%B7%AF%E7%94%B1/","/tag/","/tag/%E4%BB%8B%E7%BB%8D/","/tag/%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/","/tag/css/","/tag/html/","/tag/%E5%AE%89%E8%A3%85/","/tag/react/","/tag/react-router/","/tag/vue/","/tag/pinia/","/tag/vue-router/","/tag/vuex/","/tag/redux-toolkit/","/tag/%E6%BA%90%E7%A0%81/","/tag/%E8%B7%AF%E7%94%B1/","/tag/resource/","/article/","/star/","/timeline/"],Ee="SEARCH_PRO_QUERY_HISTORY",y=M(Ee,[]),ke=()=>{const{queryHistoryCount:r}=q,a=r>0;return{enabled:a,queryHistory:y,addQueryHistory:s=>{a&&(y.value=Array.from(new Set([s,...y.value.slice(0,r-1)])))},removeQueryHistory:s=>{y.value=[...y.value.slice(0,s),...y.value.slice(s+1)]}}},C=r=>xe[r.id]+("anchor"in r?`#${r.anchor}`:""),qe="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:_}=q,f=M(qe,[]),Ae=()=>{const r=_>0;return{enabled:r,resultHistory:f,addResultHistory:a=>{if(r){const s={link:C(a),display:a.display};"header"in a&&(s.header=a.header),f.value=[s,...f.value.slice(0,_-1)]}},removeResultHistory:a=>{f.value=[...f.value.slice(0,a),...f.value.slice(a+1)]}}},He=r=>{const a=pe(),s=U(),A=he(),m=D(0),w=k(()=>m.value>0),d=de([]);return ve(()=>{const{search:v,terminate:H}=ge(),j=be(c=>{const b=c.join(" "),{searchFilter:B=h=>h,splitWord:R,suggestionsFilter:L,...g}=a.value;b?(m.value+=1,v(c.join(" "),s.value,g).then(h=>B(h,b,s.value,A.value)).then(h=>{m.value-=1,d.value=h}).catch(h=>{console.warn(h),m.value-=1,m.value||(d.value=[])})):d.value=[]},q.searchDelay-q.suggestDelay);z([r,s],([c])=>j(c),{immediate:!0}),ye(()=>{H()})}),{isSearching:w,results:d}};var Re=te({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(r,{emit:a}){const s=ie(),A=U(),m=re(ae),{enabled:w,addQueryHistory:d,queryHistory:v,removeQueryHistory:H}=ke(),{enabled:j,resultHistory:c,addResultHistory:b,removeResultHistory:B}=Ae(),R=w||j,L=se(r,"queries"),{results:g,isSearching:h}=He(L),l=le({isQuery:!0,index:0}),n=D(0),p=D(0),O=k(()=>R&&(v.value.length>0||c.value.length>0)),Q=k(()=>g.value.length>0),S=k(()=>g.value[n.value]||null),Y=()=>{const{isQuery:e,index:t}=l;t===0?(l.isQuery=!e,l.index=e?c.value.length-1:v.value.length-1):l.index=t-1},J=()=>{const{isQuery:e,index:t}=l;t===(e?v.value.length-1:c.value.length-1)?(l.isQuery=!e,l.index=0):l.index=t+1},G=()=>{n.value=n.value>0?n.value-1:g.value.length-1,p.value=S.value.contents.length-1},K=()=>{n.value=n.value<g.value.length-1?n.value+1:0,p.value=0},N=()=>{p.value<S.value.contents.length-1?p.value+=1:K()},V=()=>{p.value>0?p.value-=1:G()},F=e=>e.map(t=>we(t)?t:i(t[0],t[1])),W=e=>{if(e.type==="customField"){const t=fe[e.index]||"$content",[o,E=""]=je(t)?t[A.value].split("$content"):t.split("$content");return e.display.map(u=>i("div",F([o,...u,E])))}return e.display.map(t=>i("div",F(t)))},x=()=>{n.value=0,p.value=0,a("updateQuery",""),a("close")},X=()=>w?i("ul",{class:"search-pro-result-list"},i("li",{class:"search-pro-result-list-item"},[i("div",{class:"search-pro-result-title"},m.value.queryHistory),v.value.map((e,t)=>i("div",{class:["search-pro-result-item",{active:l.isQuery&&l.index===t}],onClick:()=>{a("updateQuery",e)}},[i($,{class:"search-pro-result-type"}),i("div",{class:"search-pro-result-content"},e),i("button",{class:"search-pro-remove-icon",innerHTML:I,onClick:o=>{o.preventDefault(),o.stopPropagation(),H(t)}})]))])):null,Z=()=>j?i("ul",{class:"search-pro-result-list"},i("li",{class:"search-pro-result-list-item"},[i("div",{class:"search-pro-result-title"},m.value.resultHistory),c.value.map((e,t)=>i(P,{to:e.link,class:["search-pro-result-item",{active:!l.isQuery&&l.index===t}],onClick:()=>{x()}},()=>[i($,{class:"search-pro-result-type"}),i("div",{class:"search-pro-result-content"},[e.header?i("div",{class:"content-header"},e.header):null,i("div",e.display.map(o=>F(o)).flat())]),i("button",{class:"search-pro-remove-icon",innerHTML:I,onClick:o=>{o.preventDefault(),o.stopPropagation(),B(t)}})]))])):null;return me("keydown",e=>{if(r.isFocusing){if(Q.value){if(e.key==="ArrowUp")V();else if(e.key==="ArrowDown")N();else if(e.key==="Enter"){const t=S.value.contents[p.value];d(r.queries.join(" ")),b(t),s.push(C(t)),x()}}else if(j){if(e.key==="ArrowUp")Y();else if(e.key==="ArrowDown")J();else if(e.key==="Enter"){const{index:t}=l;l.isQuery?(a("updateQuery",v.value[t]),e.preventDefault()):(s.push(c.value[t].link),x())}}}}),z([n,p],()=>{var e;(e=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>i("div",{class:["search-pro-result-wrapper",{empty:r.queries.length?!Q.value:!O.value}],id:"search-pro-results"},r.queries.length?h.value?i(oe,{hint:m.value.searching}):Q.value?i("ul",{class:"search-pro-result-list"},g.value.map(({title:e,contents:t},o)=>{const E=n.value===o;return i("li",{class:["search-pro-result-list-item",{active:E}]},[i("div",{class:"search-pro-result-title"},e||m.value.defaultTitle),t.map((u,ee)=>{const T=E&&p.value===ee;return i(P,{to:C(u),class:["search-pro-result-item",{active:T,"aria-selected":T}],onClick:()=>{d(r.queries.join(" ")),b(u),x()}},()=>[u.type==="text"?null:i(u.type==="title"?ue:u.type==="heading"?ce:ne,{class:"search-pro-result-type"}),i("div",{class:"search-pro-result-content"},[u.type==="text"&&u.header?i("div",{class:"content-header"},u.header):null,i("div",W(u))])])})])})):m.value.emptyResult:R?O.value?[X(),Z()]:m.value.emptyHistory:m.value.emptyResult)}});export{Re as default};
